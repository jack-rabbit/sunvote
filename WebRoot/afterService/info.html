<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>填写资料</title>
	<link rel="stylesheet" href="http://lib.sinaapp.com/js/bootstrap/3.0.0/css/bootstrap.min.css" />
	<link rel="stylesheet" href="css/style.css" />
	<style>
    body{ background-color: #fff }
    </style>
	<!--[if IE]>
		<script src="http://libs.baidu.com/html5shiv/3.7/html5shiv.min.js"></script>
	<![endif]-->
	<script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script>
	<script src="http://lib.sinaapp.com/js/bootstrap/3.0.0/js/bootstrap.min.js"></script>
	<script src="js/data.js"></script>
    <script src="js/require.min.js"></script>

</head>
<body>
	<div class="container column" >		
		<div class="col-md-8">
			<div class="header">
				<div class="row">
				  <div class="col-xs-3"><img src="" width="140px" id="model_pic"/></div>
				  <div class="col-xs-9"><p><span id="model">EA1000</span>问题反馈</p></div>
				  <div class="col-xs-9"><p>请填写以下信息反馈问题，我们会在24小时内响应。或直接拨打售后电话您也可以根据问题的现象参照<span id="model1">EA1000</span>常见问题，自行排查问题。</p></div>
				</div>
			</div>
			<div class="content">
				<form class="form-inline" id="list">
				  <div class="form-group col-md-6">
					<label ><span class="red">*</span>校区名称：</label>
					<div class="control-group xq">
						<div class="controls col-md-6" style="padding-left:0;">
							<select id="province" class="form-control">
								<option value="请选择"></option>
							</select>
							
						</div>
						<div class="controls col-md-6" style="padding-right:0;">
							<select id="city" class="form-control">
								<option value="请选择">请选择</option>
							</select>
						</div>
					</div>
					
				  </div>
				  <div class="form-group col-md-6">
					<label for="name"><span class="red">*</span>联系人：</label>
					<input type="text" class="form-control" id="name" placeholder="">
				  </div>
				  <div class="form-group col-md-6">
					<label for="tel"><span class="red">*</span>联系电话：</label>
					<input type="text" class="form-control" id="tel" placeholder="" onkeyup="this.value=this.value.replace(/\D/g,'')" />
				  </div>
				  <div class="form-group col-md-6">
					<label for="sn"><span class="red">*</span>产品序列号：</label>
					<input type="text" class="form-control" id="sn" placeholder="" onkeyup="this.value=this.value.replace(/\D/g,'')" />
				  </div>
				  <div class="form-group col-md-6">
					<label for="exampleInputName2"><span class="red">*</span>问题现象：</label>
					<div class="controls col-md-12" style="padding:0;">
						<select id="question" class="form-control">
							<option value="请选择" id="question1">请选择</option>
						</select>
					</div>
				  </div>
				  <div class="form-group col-md-6">
					<label for="system"><span class="red">*</span>操作系统：</label>
					<div class="controls col-md-12" style="padding:0;">
						<select id="system" class="form-control">
							<option value="请选择">请选择</option>
							<option value="Windows">Windows</option>
							<option value="Mac">Mac</option>
							<option value="IOS">IOS</option>
						</select>
					</div>
				  </div>
				  <div class="form-group col-md-6">
					<label for="softname"><span class="red">*</span>软件名称：</label>
					<div class="controls col-md-12" style="padding:0;">
						<select id="softname" class="form-control">
							<option value="请选择">请选择</option>
							<option value="互动课堂">互动课堂</option>
							<option value="配对工具Match Tool">配对工具Match Tool</option>
						</select>
					</div>
				  </div>
				  <div class="form-group col-md-6">
					<label for="version">软件版本：</label>
					<input type="text" class="form-control" id="version" placeholder="">
				  </div>
				  <div class="form-group col-md-6">
					<label for="num"><span class="red">*</span>异常数量：</label>
					<input type="text" class="form-control" id="num" placeholder="" onkeyup="this.value=this.value.replace(/\D/g,'')" />
				  </div>
				  <div class="form-group col-md-12">
					<label for="dec"><span class="red">*</span>详细描述：</label>
					 <textarea class="form-control" rows="5" id="dec"></textarea>
				  </div>
				  <div class="form-group col-md-12">
					<label for="pic">问题图片：</label>
					<input type="file" class="form-control" id="pic" placeholder="">
				  </div>
				 
					
				</form>
				<input type="button" value="提交" class="btn btn-primary btn-lg" style="margin:0 auto;display:block;margin-top:5%;" onclick="submit();"/>
			</div>
		</div>
		<div class="col-md-4" style="border-left:1px solid #ccc;height:740px;padding:30px 20px;overflow-y:auto;">
		  <div class="rightBox">
			<div class="qaList EA1000">
				<div class="list_top">
					<img src="images/ea1000_q.png" width="100%"/>
					<h4><span class="k"></span>信道状态指示灯</h4>
					<p>基站收到通讯信号时闪烁。如收到键盘提交的数据。无键盘发送数据，该指示灯快闪时，表示附近有相邻频点的基站干扰。请更换改基站的频点。</p>
					<h4><span class="k"></span>连接状态指示灯</h4>
					<p>基站接通电源时慢闪（1秒一次），基站与软件连接成功时快闪（1秒多次）。</p>
				</div>
				<div class="list_content">
					<li>
						<p class="q_title">问题现象1：连接指示灯不亮</p>
						<p>初次使用时，系统会自动安装驱动，需要等待10秒左右。驱动自动安装成功后，才能正常使用。若此时仍不能解决，可能是接口接触不良，或者连接线的问题。检查基站是否插好，更换USB插口，尝试更换USB延长线。</p>
					</li>
					<li>
						<p class="q_title">问题现象2：连接指示灯慢闪（1秒一次），软件显示连接断开</p>
						<p>① 请检查答题系统的版本是否为互动课堂 2.12.1或更高版本。Match Tool的版本是否为1.0.0.1。配对工具手册及下载地址：https://shimo.im/doc/95gSPuzB1zM7bFRc</p>
						<p>② 确认基站驱动是否正常，打开设备管理器，驱动正常时，插上基站时 “人体学输入设备”会添加一个“USB输入设备”</p>
						<img src="images/ea1000_q1.png" width="30%" />
						<img src="images/ea1000_q2.png" width="30%" />
						<img src="images/ea1000_q3.png" width="30%" />
					</li>
					<li>
						<p class="q_title">问题现象3：连接指示灯快闪（1秒多次），软件显示连接断开</p>
						<p>快闪表示应用软件与基站已经连接成功，可能是软件操作问题，请查看软件操作手册。</p>
						
					</li>
				</div>
				
			</div>
			<div class="qaList EA4200W">
				<div class="list_top">
					<img src="images/ea4200w_q.png" width="100%"/>
					<h4><span class="k"></span>信道状态指示灯</h4>
					<p>基站收到通讯信号时闪烁。如收到键盘提交的数据。无键盘发送数据，该指示灯快闪时，表示附近有相邻频点的基站干扰。请更换改基站的频点。</p>
					<h4><span class="k"></span>连接状态指示灯</h4>
					<p>基站接通电源时慢闪（1秒一次），基站与软件连接成功时快闪（1秒多次）。</p>
					<h4><span class="k"></span>充电指示灯</h4>
					<p>充电时亮红灯，充满熄灭。</p>
					<h4><span class="k"></span>电源指示灯</h4>
					<p>电源连接后点亮。</p>
				</div>
				<div class="list_content">
					<li>
						<p class="q_title">问题现象1：连接指示灯不亮</p>
						<p>初次使用时，系统会自动安装驱动，需要等待10秒左右。驱动自动安装成功后，才能正常使用。若此时仍不能解决，可能是接口接触不良，或者连接线的问题。检查基站是否插好，更换USB插口，尝试更换USB延长线。</p>
					</li>
					<li>
						<p class="q_title">问题现象2：连接指示灯慢闪（1秒一次），软件显示连接断开</p>
						<p>① 请检查答题系统的版本是否为互动课堂 2.12.1或更高版本。Match Tool的版本是否为1.0.0.1。配对工具手册及下载地址：https://shimo.im/doc/95gSPuzB1zM7bFRc</p>
						<p>② 确认基站驱动是否正常，打开设备管理器，驱动正常时，插上基站时 “人体学输入设备”会添加一个“USB输入设备”</p>
						<img src="images/ea1000_q1.png" width="30%" />
						<img src="images/ea1000_q2.png" width="30%" />
						<img src="images/ea1000_q3.png" width="30%" />
					</li>
					<li>
						<p class="q_title">问题现象3：连接指示灯快闪（1秒多次），软件显示连接断开</p>
						<p>快闪表示应用软件与基站已经连接成功，可能是软件操作问题，请查看软件操作手册。</p>
						
					</li>
					<li>
						<p class="q_title">问题现象4：连接指示灯常亮</p>
						<p>基站与设备已建立wifi连接，若此时您的设备无法与该基站建立连接，可能是其他设备连接到了这个基站。检查周围是否有其他设备连接上了该基站，断开与其它基站的连接，再连接。
PS：建议老师使用手动连接的方式，不要选择自动连接。</p>
						
					</li>
					<li>
						<p class="q_title">问题现象3：连接指示灯、数据灯、充电指示灯常亮</p>
						<p>有可能是基站复位， 请联系技术支持</p>
						
					</li>
				</div>
				
			</div>
			
		  </div>
		</div>
		<div class="mb" style="position:absolute;top:0%;left:35%;background:#fff;display:none;">
			<img src="images/sn.png" width="300" />
		</div>
	</div>

	<script type="text/javascript" id="main">

</script>
	<script>
		var picBase;
		var url="http://120.78.57.84:8888/SunvoteEducation";
		var type=parseInt(getQueryString("type"));
		var model=getQueryString("model");
		var product_type="";
		// 根据自己情况配置loader config
		requirejs({
			paths: {
				"city.select": "js/jquery.city.select.min"
			}
		});
		// 使用jQuery City Select插件方式
		require(['city.select'], function ($) {
			$(function () {
				
				$('#province, #city').citylist({
					data    : data,
					id      : 'id',
					children: 'cities',
					name    : 'name',
					metaTag : 'name'
				});

				$('#all').citylist({
					data    : data,
					id      : 'id',
					children: 'cities',
					name    : 'name',
					metaTag : 'name'
				});

				$('#pre-province, #pre-city').citylist({
					data    : data,
					id      : 'id',
					children: 'cities',
					name    : 'name',
					metaTag : 'name',
					selected: [14, 1401]
				});

				$('#pre-all').citylist({
					data    : data,
					id      : 'id',
					children: 'cities',
					name    : 'name',
					metaTag : 'name',
					idVal   : true,
					selected: 1401
				});
				
				$("#model").html(model);
				$("#model1").html(model);
				switch(model){
					case "EA1000":$("#model_pic").attr("src","images/EA1000.jpg");$(".qaList").css("display","none");$(".EA1000").css("display","block");break;
					case "EA4200W":$("#model_pic").attr("src","images/EA4200W.png");$(".qaList").css("display","none");$(".EA4200W").css("display","block");break;
					default:break;
				}
				
				$.ajax({
					type:'get',
					dataType: "json",
					url:url+"/api/problem?type="+type,
					async:false,
					success:function(data){
						//console.log(data.data[0].REMARK);
						$.each(data.data,function(i,n){				
							$("#question").append('<option value="'+n.REMARK+'">'+n.REMARK+'</option>');
						})
						
					}
				});
				
				
			});
		});
		$("#pic").change(function(){
			var file = this.files[0];
			var reader = new FileReader();
			reader.readAsDataURL(file);
			reader.onload=function(e){
				picBase=this.result;
				//console.log(picBase);
			}
			
		})
		
		function getQueryString(name) {
		  var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
		  var r = window.location.search.substr(1).match(reg);
		  if (r != null) return unescape(r[2]); return null;
		}
		
		function submit(){
			if($("#name").val()==''){
				alert("请填写联系人姓名");
				return;
			}else if($("#tel").val()==''){
				alert("请填写联系电话");
				return;
			}else if($("#sn").val()==''){
				alert("请填写产品序列号");
				return;
			}else if($("#question").val()=='请选择'){
				alert("请选择问题现象");
				return;
			}else if($("#system").val()=='请选择'){
				alert("请选择操作系统");
				return;
			}else if($("#softname").val()=='请选择'){
				alert("请选择软件名称");
				return;
			}else if($("#num").val()==''){
				alert("请填写异常数量");
				return;
			}else if($("#dec").val()==''){
				alert("请详细描述问题现象");
				return;
			}
			
			
			switch(type){
				case 1:product_type="基站";break;
				case 2:product_type="答题器";break;
				case 3:product_type="配件";break;
				default:product_type="其他";break;
			}
			
			var data={
				SCHOOL_ADDRESS1:$("#province").val(),
				SCHOOL_ADDRESS2:$("#city").val(),
				CONTACT_PHONE:$("#name").val(),
				PHONE_CONTACT:$("#tel").val(),
				PRODUCT_SEQ:$("#sn").val(),
				QUESTION_NAME:$("#question").val(),
				OS:$("#system").val(),
				SOFTWARE_VERSION:$("#version").val(),
				SOFTWARE_NAME:$("#softname").val(),
				EXCEPTION_NUM:$("#num").val(),
				DESCRIPTION:$("#dec").val(),
				PROBLEM_PATH:picBase,
				PRODUCT_TYPE:product_type,
				PRODUCT_MODEL:model,
				CUSTOMER_CODE:"2396"				
			};
			$.ajax({
				type:'post',
				dataType: "json",
				url:url+"/api/feedback/add",
				data:data,
				success:function(data){
					alert("提交成功！");
					window.location.reload();
				}
			})
		}
		
		$("#sn").focus(function(){
			//alert(1);
			$(".mb").css("display","block");
		});
		$("#sn").blur(function(){
			//alert(1);
			$(".mb").css("display","none");
		});
		$(".mb").click(function(){
			//alert(1);
			$(".mb").css("display","none");
		});
	

	
</script>

</body>
</html>