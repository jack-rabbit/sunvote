<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>填写资料</title>
	<link rel="stylesheet" href="http://lib.sinaapp.com/js/bootstrap/3.0.0/css/bootstrap.min.css" />
	<link rel="stylesheet" href="css/style.css" />
	<style>
    body{ background-color: #fff }
    </style>
	<!--[if IE]>
		<script src="http://libs.baidu.com/html5shiv/3.7/html5shiv.min.js"></script>
	<![endif]-->
	<script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script>
	<script src="http://lib.sinaapp.com/js/bootstrap/3.0.0/js/bootstrap.min.js"></script>
	<script src="js/data.js"></script>
    <script src="js/require.min.js"></script>

</head>
<body>
	<div class="container column" >		
		<div class="col-md-8">
			<div class="header">
				<div class="row">
				  <div class="col-xs-3"><img src="" width="140px" id="model_pic"/></div>
				  <div class="col-xs-9"><p><span id="model">答题器</span>问题反馈</p></div>
				  <div class="col-xs-9"><p>请填写以下信息反馈问题，我们会在24小时内响应。或直接拨打售后电话您也可以根据问题的现象参照答题器常见问题，自行排查问题。</p></div>
				</div>
			</div>
			<div class="content">
				<form class="form-inline" id="list">
				  <div class="form-group col-md-6">
					<label ><span class="red">*</span>校区名称：</label>
					<div class="control-group xq">
						<div class="controls col-md-6" style="padding-left:0;">
							<!-- <select id="province" class="form-control">
								<option value="请选择"></option>
							</select> -->
							<input type="text" class="form-control" id="province" placeholder="">
						</div>
						<!-- <div class="controls col-md-6" style="padding-right:0;">
							<select id="city" class="form-control">
								<option value="请选择">请选择</option>
							</select>
						</div> -->
					</div>
					
				  </div>
				  <div class="form-group col-md-6">
					<label for="name"><span class="red">*</span>联系人：</label>
					<input type="text" class="form-control" id="name" placeholder="">
				  </div>
				  <div class="form-group col-md-6">
					<label for="tel"><span class="red">*</span>联系电话：</label>
					<input type="text" class="form-control" id="tel" placeholder="" onkeyup="this.value=this.value.replace(/\D/g,'')" />
				  </div>
				  <div class="form-group col-md-6">
					<label for="sn"><span class="red">*</span>产品序列号：</label>
					<input type="text" class="form-control" id="sn" placeholder="" onkeyup="this.value=this.value.replace(/\D/g,'')" />
				  </div>
				  <div class="form-group col-md-6">
					<label for="question"><span class="red">*</span>问题现象：</label>
					<div class="controls col-md-12" style="padding:0;">
						<select id="question" class="form-control">
							<option value="请选择" id="question1">请选择</option>
						</select>
					</div>
				  </div>
				  <div class="form-group col-md-6">
					<label for="system"><span class="red">*</span>操作系统：</label>
					<div class="controls col-md-12" style="padding:0;">
						<select id="system" class="form-control">
							<option value="请选择">请选择</option>
							<option value="Windows">Windows</option>
							<option value="Mac">Mac</option>
							<option value="IOS">IOS</option>
						</select>
					</div>
				  </div>
				  <div class="form-group col-md-6">
					<label for="softname"><span class="red">*</span>软件名称：</label>
					<div class="controls col-md-12" style="padding:0;">
						<select id="softname" class="form-control">
							<option value="请选择">请选择</option>
							<option value="互动课堂">互动课堂</option>
							<option value="配对工具Match Tool">配对工具Match Tool</option>
						</select>
					</div>
				  </div>
				  <div class="form-group col-md-6">
					<label for="version">软件版本：</label>
					<input type="text" class="form-control" id="version" placeholder="">
				  </div>
				  <div class="form-group col-md-6">
					<label for="num"><span class="red">*</span>异常数量：</label>
					<input type="text" class="form-control" id="num" placeholder="" onkeyup="this.value=this.value.replace(/\D/g,'')" />
				  </div>
				  <div class="form-group col-md-6">
					<label for="station"><span class="red">*</span>配套基站：</label>
					<div class="controls col-md-12" style="padding:0;">
						<select id="station" class="form-control">
							<option value="请选择">请选择</option>
							<option value="EA1000">EA1000</option>
							<option value="EA4200W">EA4200W</option>
						</select>
					</div>
				  </div>
				  <div class="form-group col-md-12">
					<label for="dec"><span class="red">*</span>详细描述：</label>
					 <textarea class="form-control" rows="5" id="dec"></textarea>
				  </div>
				  <div class="form-group col-md-12">
					<label for="pic">问题图片：</label>
					<input type="file" class="form-control" id="pic" placeholder="">
				  </div>
				 
					
				</form>
				<input type="button" value="提交" class="btn btn-primary btn-lg" style="margin:0 auto;display:block;margin-top:5%;" onclick="submit();"/>
			</div>
		</div>
		<div class="col-md-4" style="border-left:1px solid #ccc;height:740px;padding:30px 20px;overflow-y:auto;">
		  <div class="rightBox">
			<div class="qaList">
				<div class="list_top">
				
				</div>
				<div class="list_content">
					<li>
						<p class="q_title">问题现象1：无法开机</p>
						<p>可能答题器没有电导致，更换电池后再次尝试是否可以开机。若更换电池后仍无法开机，请联系技术支持。</p>
					</li>
					<li>
						<p class="q_title">问题现象2：无信号</p>
						<p>确认基站连接成功后，答题器仍显示未连接，可能是未与基站绑定导致。请尝试重新绑定。”</p>
					
					</li>
					<li>
						<p class="q_title">问题现象3：为什么我的答题按A（或其他键）显示已发送，再按其他按键无反应 </p>
						<p>可能是由于信号不好导致按键值未传成功。干扰信号的因素：2.4G 设备，信号屏蔽仪， 同频点或免配对基站，人或其他物体的阻挡。避免信号干扰的方法如下： </p>
						<p>① 确保附近没有其他基站干扰，排除同频点及开启免赔对基站的干扰。 </p>
						<p>② 确保答题器和基站之间没有障碍物阻挡，基站尽量放高，禁止放在铁制盒子/柜子中。</p>
						<p>③ 确保未开启信号屏蔽 </p>
						<p>④ 选择合适的工作频点，与周围的正在使用的基站频点尽可能隔开 4 个频点（经验值）。 </p>
						<p>若排除以上因素，可以让学生原地晃动下答题器，尝试是否可以提交。 </p>
						<p>❖ 同频点的干扰可以通过基站的指示灯排查，再无答题数据上传时，基站 2 个灯闪烁， 即表示当前有相同频点的干扰，请更改当前基站的频点 </p>
						
					</li>
					<li>
						<p class="q_title">问题现象4：什么情况下耗电快？</p>
						<p>❖ 离线开机 离线开机时，答题器需要搜索基站，无线模块一直处于发射信号中，耗电比正常工作 时要大很多。 </p>
						<p>❖ 保管不当 装有电池的答题器，宜要存放在干燥通风的地方。温差太大或者太潮湿的环境都不 适宜存放</p>
						
					</li>
					<li>
						<p class="q_title">问题现象5：为什么只用了几天，电量就显示只有1格/空格？ </p>
						<p>❖ 答题器离线时，由于功率较大，因此电量显示会被拉低。因此请插上基站后，答题器 显示已连接后，等待1分钟左右，再观察电量情况。以此时的电量为准。 </p>
						<p>❖ 若答题器屏幕显示Low battery，则无论是在离线或者在线，都需要更换电池。 </p>
					</li>
					<li>
						<p class="q_title">问题现象6：如何单独保管电池？</p>
						<p>❖ 电池单独存放时，须存放在厂家发货的托盘中，禁止堆积存放，否则放电极快造成电 池发热，甚至可能会引起电池破裂或起火的危险 。 </p>
						<p>❖ 电池宜存放在阴凉通风的地方，禁止在太阳下暴晒。温差太大或者太潮湿的环境都 不适宜存放。</p>
					</li>
					<li>
						<p class="q_title">问题现象7：如何选择电池品牌？ </p>
						<p>❖ S56适配的电池型号是CR2032，在超市或者网上都可以购买。选择电池品牌时，尽 量选择大品牌的电池。推荐使用进口松下电池。 </p>
					</li>
				</div>
				
			</div>
			
			
		  </div>
		</div>
		<div class="mb" style="position:absolute;top:0%;left:35%;background:#fff;display:none;">
			<img src="images/sn.png" width="300" />
		</div>
	</div>

	<script type="text/javascript" id="main">

</script>
	<script>
		var picBase;
		var url="http://120.78.57.84:8888/SunvoteEducation";
		var type=parseInt(getQueryString("type"));
		var model=getQueryString("model");
		var product_type="";
		// 根据自己情况配置loader config
		requirejs({
			paths: {
				"city.select": "js/jquery.city.select.min"
			}
		});
		// 使用jQuery City Select插件方式
		require(['city.select'], function ($) {
			$(function () {
				
				/* $('#province, #city').citylist({
					data    : data,
					id      : 'id',
					children: 'cities',
					name    : 'name',
					metaTag : 'name'
				}); */

				$('#all').citylist({
					data    : data,
					id      : 'id',
					children: 'cities',
					name    : 'name',
					metaTag : 'name'
				});

				$('#pre-province, #pre-city').citylist({
					data    : data,
					id      : 'id',
					children: 'cities',
					name    : 'name',
					metaTag : 'name',
					selected: [14, 1401]
				});

				$('#pre-all').citylist({
					data    : data,
					id      : 'id',
					children: 'cities',
					name    : 'name',
					metaTag : 'name',
					idVal   : true,
					selected: 1401
				});
				
				//$("#model").html(model);
				switch(model){					
					case "dtq":$("#model_pic").attr("src","images/gsu30.png");$(".qaList").css("display","block");break;
					default:break;
				}
				
				$.ajax({
					type:'get',
					dataType: "json",
					url:url+"/api/problem?type="+type,
					async:false,
					success:function(data){
						//console.log(data.data[0].REMARK);
						$.each(data.data,function(i,n){				
							$("#question").append('<option value="'+n.REMARK+'">'+n.REMARK+'</option>');
						})
						
					}
				});
				
				
			});
		});
		$("#pic").change(function(){
			var file = this.files[0];
			var reader = new FileReader();
			reader.readAsDataURL(file);
			reader.onload=function(e){
				picBase=this.result;
				//console.log(picBase);
			}
			
		})
		
		function getQueryString(name) {
		  var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
		  var r = window.location.search.substr(1).match(reg);
		  if (r != null) return unescape(r[2]); return null;
		}
		
		function submit(){
			if($("#name").val()==''){
				alert("请填写联系人姓名");
				return;
			}else if($("#tel").val()==''){
				alert("请填写联系电话");
				return;
			}else if($("#sn").val()==''){
				alert("请填写产品序列号");
				return;
			}else if($("#question").val()=='请选择'){
				alert("请选择问题现象");
				return;
			}else if($("#system").val()=='请选择'){
				alert("请选择操作系统");
				return;
			}else if($("#softname").val()=='请选择'){
				alert("请选择软件名称");
				return;
			}else if($("#num").val()==''){
				alert("请填写异常数量");
				return;
			}else if($("#dec").val()==''){
				alert("请详细描述问题现象");
				return;
			}
			
			
			switch(type){
				case 1:product_type="基站";break;
				case 2:product_type="答题器";break;
				case 3:product_type="配件";break;
				default:product_type="其他";break;
			}
			
			var data={
				SCHOOL_ADDRESS1:$("#province").val(),
				/* SCHOOL_ADDRESS2:$("#city").val(), */
				CONTACT_PHONE:$("#name").val(),
				PHONE_CONTACT:$("#tel").val(),
				PRODUCT_SEQ:$("#sn").val(),
				QUESTION_NAME:$("#question").val(),
				OS:$("#system").val(),
				SOFTWARE_VERSION:$("#version").val(),
				SOFTWARE_NAME:$("#softname").val(),
				EXCEPTION_NUM:$("#num").val(),
				DESCRIPTION:$("#dec").val(),
				PROBLEM_PATH:picBase,
				PRODUCT_TYPE:product_type,
				PRODUCT_MODEL:model,
				BASE_STATION:$("#station").val(),
				CUSTOMER_CODE:"3792"				
			};
			$.ajax({
				type:'post',
				dataType: "json",
				url:url+"/api/feedback/add",
				data:data,
				success:function(data){
					alert("提交成功！");
				}
			})
		}
		
		$("#sn").focus(function(){
			//alert(1);
			$(".mb").css("display","block");
		});
		$("#sn").blur(function(){
			//alert(1);
			$(".mb").css("display","none");
		});
		$(".mb").click(function(){
			//alert(1);
			$(".mb").css("display","none");
		});
	

	
</script>

</body>
</html>